language: node_js
node_js:
  - '6.10'
  - '8.10'
  - '10.10'
jdk:
  - oraclejdk8
install:
  - mkdir /tmp/dynamodb
  - wget -O - https://s3-us-west-2.amazonaws.com/dynamodb-local/dynamodb_local_latest.tar.gz | tar xz --directory /tmp/dynamodb
  - npm install
script: make test-cov
before_script:
  - java -Xms256M -Xmx256M -Xss2M -Djava.library.path=/tmp/dynamodb/DynamoDBLocal_lib -jar /tmp/dynamodb/DynamoDBLocal.jar -sharedDb -inMemory &
  - sleep 3
after_success: 'make coveralls; make clean'
